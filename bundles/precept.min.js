!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).precept={})}(this,(function(t){"use strict";var e,n,r,i,a,o,s={};({get exports(){return s},set exports(t){s=t}}).exports=function(){if(o)return a;o=1;var t=n?e:(n=1,e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function r(){}function i(){}return i.resetWarningCache=r,a=function(){function e(e,n,r,i,a,o){if(o!==t){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function n(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:i,resetWarningCache:r};return a.PropTypes=a,a}}()();function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function f(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}function h(t,e,n){return(e=f(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function p(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function y(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,p(t,e,"set"),n),n}function v(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,p(t,e,"get"))}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}!function(){if(i)return r;function t(t,e,n,r,i){}i=1,t.resetWarningCache=function(){},r=t}();var O=new WeakMap,T=new WeakMap,k=new WeakMap,j=new WeakMap,S=new WeakMap,E=new WeakMap,A=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(this,t),w(this,O,{writable:!0,value:new Map}),w(this,T,{writable:!0,value:!1}),w(this,k,{writable:!0,value:new Map}),w(this,j,{writable:!0,value:new Set}),w(this,S,{writable:!0,value:null}),w(this,E,{writable:!0,value:{}});var r={};if(e instanceof Element)if(this.render){if(e.hasAttribute("data-initial-state"))try{r=JSON.parse(e.getAttribute("data-initial-state"))}catch(t){console.error('Warning: "data-initial-state" must contain valid JSON')}y(this,S,e),this.setState(g(g({},r),n)),this.initialize(),this.initialize=this.initialize.bind(this),this.validate=this.validate.bind(this),this.render=this.render.bind(this),this.update=this.update.bind(this),this.subscribe(this.validate),this.subscribe(this.render),this.subscribe(this.update),this.validate(this.state,{},this),this.render(this.state,{},this),this.update(this.state,{},this),y(this,T,!0)}else console.error('Warning: components must have a "render" method');else console.error("Warning: the root element must be an HTML element")}var e,n,r;return e=t,(n=[{key:"components",get:function(){return Object.fromEntries(v(this,O))},set:function(e){var n=this;Object.entries(e).forEach((function(e){var r=c(e,2),i=r[0],a=r[1];a instanceof t?(v(n,O).has(i)&&v(n,O).get(i).destroy(),v(n,O).set(i,a)):console.error('Warning: component "'.concat(i,'" is not an instance of "Component"'))}))}},{key:"displayName",get:function(){var t=this.constructor,e=t.name;return t.displayName||e}},{key:"listeners",get:function(){return Object.fromEntries(v(this,k))},set:function(t){var e=this;Object.entries(t).forEach((function(t){var n=c(t,2),r=n[0],i=n[1];"function"==typeof(null==i?void 0:i.destroy)?(v(e,k).has(r)&&v(e,k).get(r).destroy(),v(e,k).set(r,i)):console.error('Warning: listener "'.concat(r,'" is missing a "destroy" function'))}))}},{key:"initialized",get:function(){return v(this,T)}},{key:"rootElement",get:function(){return v(this,S)}},{key:"state",get:function(){return g({},v(this,E))},set:function(t){this.initialized?console.error('Warning: state can only be updated via "setState" after initialization'):this.setState(t)}},{key:"destroy",value:function(){v(this,j).clear(),v(this,k).forEach((function(t){return t.destroy()})),v(this,O).forEach((function(t){return t.destroy()}))}},{key:"setState",value:function(t){var e=this,n=this.constructor,r=n.defaultState,i=void 0===r?{}:r;n.stateTypes;var a=this.state,o={};if(Object.entries(t).forEach((function(t){var e=c(t,2),n=e[0],r=e[1];r!==a[n]&&(o[n]=r)})),Object.keys(o).length>0||!this.initialized){var s=g(g({},a),o);Object.keys(i).forEach((function(t){void 0===s[t]&&(s[t]=i[t])})),y(this,E,s),this.initialized&&v(this,j).forEach((function(t){t(o,a,e)}))}}},{key:"subscribe",value:function(t){"function"==typeof t?v(this,j).has(t)||v(this,j).add(t):console.error('Warning: a function must be provided to "subscribe"')}},{key:"unsubscribe",value:function(t){v(this,j).has(t)&&v(this,j).delete(t)}},{key:"initialize",value:function(){}},{key:"validate",value:function(){}},{key:"update",value:function(){}}])&&d(e.prototype,n),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function P(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.addEventListener.apply(t,n),{destroy:function(){t.removeEventListener.apply(t,n)}}}function W(t,e){Object.entries(null!=e?e:{}).forEach((function(e){var n=c(e,2),r=n[0],i=n[1];null===i?t.removeAttribute(r):t.setAttribute(r,i)}))}function x(t,e){return Array.from(t.querySelectorAll(e))}function C(){return function(t){const{uniqueId:e,activeTab:n,manual:r,totalTabs:i,totalPanels:a,changeTab:o,focusOnTab:s}=t,l=Array.from(Array(i).keys()),c=Array.from(Array(a).keys());return i!==a&&console.error(`Warning: Tabs must have an equal number of tabs and panels. Found ${i} tabs and ${a} panels.`),(n<0||n>=i)&&console.error(`Warning: There is no tab for index: "${n}"`),{htmlAttributes:{tablist:{role:"tablist"},tabs:l.map((t=>({type:"button",role:"tab",id:`${e}-tab-${t}`,"aria-controls":`${e}-panel-${t}`,"aria-selected":n===t,"data-active":n===t}))),panels:c.map((t=>({role:"tabpanel",id:`${e}-panel-${t}`,"aria-labelledby":`${e}-tab-${t}`,"data-active":n===t})))},eventHandlers:{tabs:l.map((t=>({click(){o(t)},focus(){r||o(t)},keydown(e){r||("ArrowRight"===e.key?s(t===i-1?0:t+1):"ArrowLeft"===e.key&&s(0===t?i-1:t-1))}})))}}}({...this.state,uniqueId:this.id,totalTabs:this.elements.tabs.length,totalPanels:this.elements.panels.length,changeTab:t=>{this.setState({activeTab:t})},focusOnTab:t=>{this.elements.tabs[t].focus()}})}t.Tabs=class extends A{static get stateTypes(){return{activeTab:s.number,manual:s.bool}}static get defaultState(){return{activeTab:0,manual:!1}}initialize(){const{rootElement:t}=this;this.id=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(t)).reduce(((t,e)=>t+((e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_")),"")}(8),this.elements={tablist:t.querySelector("[data-tablist]"),tabs:x(t,"[data-tab]"),panels:x(t,"[data-panel]")},this.listeners={tabClick:P(t,"click",this.handleTabClick.bind(this)),tabFocus:P(t,"focus",this.handleTabFocus.bind(this),!0),tabKeyDown:P(t,"keydown",this.handleTabKeyDown.bind(this))}}handleTabClick(t){const{tabs:e}=this.elements;if(e.includes(t.target)){const n=e.indexOf(t.target),{eventHandlers:r}=C.call(this);r.tabs[n].click(t)}}handleTabFocus(t){const{tabs:e}=this.elements;if(e.includes(t.target)){const n=e.indexOf(t.target),{eventHandlers:r}=C.call(this);r.tabs[n].focus(t)}}handleTabKeyDown(t){const{tabs:e}=this.elements;if(e.includes(t.target)){const n=e.indexOf(t.target),{eventHandlers:r}=C.call(this);r.tabs[n].keydown(t)}}render(t){const{tablist:e,tabs:n,panels:r}=this.elements,{htmlAttributes:i}=C.call(this);this.initialized||W(e,i.tablist),"activeTab"in t&&(n.forEach(((t,e)=>{W(t,i.tabs[e])})),r.forEach(((t,e)=>{W(t,i.panels[e])})))}}}));
