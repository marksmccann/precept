!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).precept={})}(this,(function(t){"use strict";function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function o(t,e,n){return(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function c(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function l(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var f,b,p,y,h,d,v={};({get exports(){return v},set exports(t){v=t}}).exports=function(){if(d)return h;d=1;var t=b?f:(b=1,f="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function e(){}function n(){}return n.resetWarningCache=e,h=function(){function r(e,n,r,i,o,a){if(a!==t){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function i(){return r}r.isRequired=r;var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o}}()();function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){u=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function w(t){var e=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===O(e)?e:String(e)}function j(t,e,n){return(e=w(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w(r.key),r)}}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function P(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,S(t,e,"set"),n),n}function E(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,S(t,e,"get"))}function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){j(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}!function(){if(y)return p;function t(t,e,n,r,i){}y=1,t.resetWarningCache=function(){},p=t}();var x=new Set,C=new WeakMap,D=new WeakMap,R=new WeakMap,M=new WeakMap,I=new WeakMap,q=new WeakMap,z=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};k(this,t),_(this,C,{writable:!0,value:new Map}),_(this,D,{writable:!0,value:!1}),_(this,R,{writable:!0,value:new Map}),_(this,M,{writable:!0,value:new Set}),_(this,I,{writable:!0,value:null}),_(this,q,{writable:!0,value:{}});var r={},i=e;if("string"==typeof i&&(i=document.body.querySelector(e)),i instanceof Element)if(this.render){if(i.hasAttribute("data-initial-state"))try{r=JSON.parse(i.getAttribute("data-initial-state"))}catch(t){console.error('Warning: "data-initial-state" must contain valid JSON')}P(this,I,i),this.setup=this.setup.bind(this),this.validate=this.validate.bind(this),this.render=this.render.bind(this),this.update=this.update.bind(this),this.subscribe(this.validate),this.subscribe(this.render),this.subscribe(this.update),this.setState(W(W({},r),n)),this.setup(),this.validate(this.state,{},this),this.render(this.state,{},this),this.update(this.state,{},this),P(this,D,!0),x.add(this)}else console.error('Warning: components must have a "render" method');else console.error("Warning: the root element must be an HTML element")}var e,n,r;return e=t,r=[{key:"instances",get:function(){return Array.from(x)}}],(n=[{key:"components",get:function(){return Object.fromEntries(E(this,C))},set:function(e){var n=this;Object.entries(e).forEach((function(e){var r=g(e,2),i=r[0],o=r[1];o instanceof t?(E(n,C).has(i)&&E(n,C).get(i).destroy(),E(n,C).set(i,o)):console.error('Warning: component "'.concat(i,'" is not an instance of "Component"'))}))}},{key:"displayName",get:function(){var t=this.constructor,e=t.name;return t.displayName||e}},{key:"listeners",get:function(){return Object.fromEntries(E(this,R))},set:function(t){var e=this;Object.entries(t).forEach((function(t){var n=g(t,2),r=n[0],i=n[1];"function"==typeof(null==i?void 0:i.destroy)?(E(e,R).has(r)&&E(e,R).get(r).destroy(),E(e,R).set(r,i)):console.error('Warning: listener "'.concat(r,'" is missing a "destroy" function'))}))}},{key:"initialized",get:function(){return E(this,D)}},{key:"rootElement",get:function(){return E(this,I)}},{key:"state",get:function(){return W({},E(this,q))},set:function(t){this.initialized?console.error('Warning: state can only be updated via "setState" after initialization'):this.setState(t)}},{key:"destroy",value:function(){E(this,M).clear(),E(this,R).forEach((function(t){return t.destroy()})),E(this,C).forEach((function(t){return t.destroy()})),x.delete(this)}},{key:"setState",value:function(t){var e=this,n=this.constructor,r=n.defaultState,i=void 0===r?{}:r;n.stateTypes;var o=this.state,a={};if(Object.entries(t).forEach((function(t){var e=g(t,2),n=e[0],r=e[1];r!==o[n]&&(a[n]=r)})),Object.keys(a).length>0||!this.initialized){var s=W(W({},o),a);Object.keys(i).forEach((function(t){void 0===s[t]&&(s[t]=i[t])})),P(this,q,s),this.initialized&&E(this,M).forEach((function(t){t(a,o,e)}))}}},{key:"subscribe",value:function(t){"function"==typeof t?E(this,M).has(t)||E(this,M).add(t):console.error('Warning: a function must be provided to "subscribe"')}},{key:"unsubscribe",value:function(t){E(this,M).has(t)&&E(this,M).delete(t)}},{key:"setup",value:function(){}},{key:"validate",value:function(){}},{key:"update",value:function(){}}])&&T(e.prototype,n),r&&T(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function N(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.addEventListener.apply(t,n),{destroy:function(){t.removeEventListener.apply(t,n)}}}function H(t,e){Object.entries(null!=e?e:{}).forEach((function(e){var n=g(e,2),r=n[0],i=n[1];null===i?t.removeAttribute(r):void 0!==i&&t.setAttribute(r,i)}))}function L(){var t,e,r,i,o,a,s,c,u,l,f=this;return t=n(n({},this.state),{},{uniqueId:this.id,totalTabs:this.elements.tabs.length,totalPanels:this.elements.panels.length,changeTab:function(t){f.setState({activeTab:t})},focusOnTab:function(t){f.elements.tabs[t].focus()}}),e=t.uniqueId,r=t.activeTab,i=t.manual,o=t.totalTabs,a=t.totalPanels,s=t.changeTab,c=t.focusOnTab,u=Array.from(Array(o).keys()),l=Array.from(Array(a).keys()),o!==a&&console.error("Warning: Tabs must have an equal number of tabs and panels. Found ".concat(o," tabs and ").concat(a," panels.")),(r<0||r>=o)&&console.error('Warning: There is no tab for index: "'.concat(r,'"')),{htmlAttributes:{tablist:{role:"tablist"},tabs:u.map((function(t){return{type:"button",role:"tab",id:"".concat(e,"-tab-").concat(t),"aria-controls":"".concat(e,"-panel-").concat(t),"aria-selected":r===t,"data-active":r===t}})),panels:l.map((function(t){return{role:"tabpanel",id:"".concat(e,"-panel-").concat(t),"aria-labelledby":"".concat(e,"-tab-").concat(t),"data-active":r===t}}))},eventHandlers:{tabs:u.map((function(t){return{click:function(){s(t)},focus:function(){i||s(t)},keydown:function(e){i||("ArrowRight"===e.key?c(t===o-1?0:t+1):"ArrowLeft"===e.key&&c(0===t?o-1:t-1))}}}))}}}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(c,t);var e,n,o,a=u(c);function c(){return r(this,c),a.apply(this,arguments)}return e=c,n=[{key:"setup",value:function(){var t=this.rootElement;this.id=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(t)).reduce((function(t,e){return t+((e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_")}),"")}(8),this.elements={tablist:t.querySelector("[data-tablist]"),tabs:Array.from(t.querySelectorAll(":scope > * > [data-tab]")),panels:Array.from(t.querySelectorAll(":scope > [data-panel]"))},this.listeners={tabClick:N(t,"click",this.handleTabClick.bind(this)),tabFocus:N(t,"focus",this.handleTabFocus.bind(this),!0),tabKeyDown:N(t,"keydown",this.handleTabKeyDown.bind(this))}}},{key:"handleTabClick",value:function(t){var e=this.elements.tabs;if(e.includes(t.target)){var n=e.indexOf(t.target);L.call(this).eventHandlers.tabs[n].click(t)}}},{key:"handleTabFocus",value:function(t){var e=this.elements.tabs;if(e.includes(t.target)){var n=e.indexOf(t.target);L.call(this).eventHandlers.tabs[n].focus(t)}}},{key:"handleTabKeyDown",value:function(t){var e=this.elements.tabs;if(e.includes(t.target)){var n=e.indexOf(t.target);L.call(this).eventHandlers.tabs[n].keydown(t)}}},{key:"render",value:function(t){var e=this.elements,n=e.tablist,r=e.tabs,i=e.panels,o=L.call(this).htmlAttributes;this.initialized||H(n,o.tablist),"activeTab"in t&&(r.forEach((function(t,e){H(t,o.tabs[e])})),i.forEach((function(t,e){H(t,o.panels[e])})))}}],o=[{key:"stateTypes",get:function(){return{activeTab:v.number,manual:v.bool}}},{key:"defaultState",get:function(){return{activeTab:0,manual:!1}}}],n&&i(e.prototype,n),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),c}(z);t.Tabs=F}));
